language: java
sudo: false
install: true
jdk: oraclejdk8
script: ./travis.sh

env:
  - TARGET=CI

matrix:
  fast_finish: true

cache:
  directories:
    - $HOME/.m2/repository
    - $HOME/.sonar
    - server/sonar-web/node
    - server/sonar-web/node_modules
    - $HOME/jvm
    - $HOME/phantomjs

before_cache:
  # remove all the artifacts (JAR, ZIP) that are installed in local repo because of mvn deploy
  - rm -rf $HOME/.m2/repository/org/sonarsource/sonarqube
  - find $HOME/.m2 -name resolver-status.properties -exec rm {} \;

notifications:
  email: false
  webhooks:
    - secure: "HE4BrUYSxnlY7y16HQ51QdcIyJ5o4BoQZJ2Dxn3EkOwwnzi0qPSpKdccnjLS3DdvU7VgvsHUklEXzjY5T7sdS8XNP2qRvJJKWezISsCbW3+a/hFVLHrKUbxutHrHdRv1+1ZheQ9FNIANXJh3dNHWdNE6QTrd5sQ6HdCpHgDB2zfuIBQublQjhB4g5bWl3Uh4ZM2DKZhkpZjt1GUxG7Zfsb11o1UAUj2QNhMPg0R3WRB1KjhyTvrQQIsgOYp4GYSIoFORhArEvrVU1rIZv7uhjVV8/4LJ1aavnIfHlbirhhuyAPEWbDtGpKuObW3I6WUZTcqadOcQbBoyv5J8Qa0blT441FmG5TNlgGkcR5a4J2iwsf13o+0UROkCadT3xmEm+FtRdsdB+cbmsSIHc991ovbxDOBK8eXP2NjmLZTLtA11TCh9zBE76TI8kjI50mYIpX4dPuQqC+oiHwEwt+BDF1uSW3Fi+VSTIsE/APIGypG4Vks6yx8kHfluGXR4jB5KPQwHb+mDFtwpkVPuKlIw3234Ou9ibjz8Wamgknsu5o0y9zukpQQekiVuE8j3chNmSuIj4O7ULvSFxM1raIbvvT8pK+/qWT2IPEF7D1j/AoucgBfTJPKoMm1q8lobO3YDFXwtfzE7hZ1pQJdnn99dRKSX8s/1RRlb/UAMqwcLuAo="
  on_success: always
  on_failure: never
  on_start: never
  on_cancel: never
  on_error: never
