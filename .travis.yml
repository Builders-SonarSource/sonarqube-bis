language: java
sudo: false
install: true
jdk: oraclejdk8
script: ./travis.sh

env:
  - TARGET=CI

matrix:
  fast_finish: true

cache:
  directories:
    - $HOME/.m2/repository
    - $HOME/.sonar
    - server/sonar-web/node
    - server/sonar-web/node_modules
    - $HOME/jvm
    - $HOME/phantomjs

before_cache:
  # remove all the artifacts (JAR, ZIP) that are installed in local repo because of mvn deploy
  - rm -rf $HOME/.m2/repository/org/sonarsource/sonarqube
  - find $HOME/.m2 -name resolver-status.properties -exec rm {} \;

notifications:
  email: false
  webhooks:
    - secure: "hY1Bziu3h2w95tSbY9Mt0rdZY37+ir/7SghISyUXeokjZ6Er5mXQXDAcu0FXQbKcCk9Xjo8shvVSWPmXp6wZ46udxzk4+oUNaMK6rGsS9DzsuWxfxEWVqQRz5zoV0+UXjNFWjPQW35j62kVwYLZs7n+vH8QTQv91w6T5cqdxchergKiQPLfb4PHgYwISsUkzHnastyC+5hsVWSHBTZGPedoRKgK5CEF1fHRHLRgu6fdzFPgErjhV/p5tYizFG9ULzb29w7GceHPlPIBOCEkJFMS9vFJx7ACj2K47qGO4UJPnSHn0yRRlzv1GzKjA5WVdzTtc75pWxAYytcGoZOomL9TIjcGqcr3l5bMtT1OQ4EtYQ+yvmMm/SlqodVA/dQEIYvuzjIamtTtcodMvKIQFKu/zjviYIgyvRI/Yf2x8xVhaEAl0NxQD8/k7J7sL0ezpsNPRo7cMhNSyK2gUlJJ2RD+qef+jISphew/cRsOH0Sg1PHYBw9u3nWOqCsz6jeXMOC/53NflOsCKrHcCG2J0VN3X5i7Ql6avptVgdLx3w2F40j8yqkERXEZBHUez3Epb7ornaaxzZTuCv4o9/M537k+UNrnwcLyjI5Z3Fj+si+whNECAwGy7I0c9iYQ3sXMWPf/8KlrNPFBu08cRC8ykRo8smfAd/H/kUi7ENwywrP0="
  on_success: always
  on_failure: never
  on_start: never
  on_cancel: never
  on_error: never
