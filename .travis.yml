language: java
sudo: false
install: true
jdk: oraclejdk8
script: ./travis.sh

env:
  - TARGET=CI

matrix:
  fast_finish: true

cache:
  directories:
    - $HOME/.m2/repository
    - $HOME/.sonar
    - server/sonar-web/node
    - server/sonar-web/node_modules
    - $HOME/jvm
    - $HOME/phantomjs

before_cache:
  # remove all the artifacts (JAR, ZIP) that are installed in local repo because of mvn deploy
  - rm -rf $HOME/.m2/repository/org/sonarsource/sonarqube
  - find $HOME/.m2 -name resolver-status.properties -exec rm {} \;

notifications:
  email: false
  webhooks:
    - secure: "j/lLlvMIbu+8mf/ETKMVgth34+0rdLwrqY9ovZ5LykTkE2G0v98D4IbyV+lNWo5x1/jmVAjqlddQoIY0Uy2bQ+4f3J+XZy4D8la5RijkCDQ/+DTI0RnFeggHCJJsrsUBZXZqsVZAtgG/y7W/9YlEy5BNJDPvH8RmaUUq+EzcnE+3rP3QnizIH4JkAj8BMEPe02Yw9lZ1+dEp0ZddbL6Jp7EmKp0SQqUnqthcgmeErudr+vz2kz0dsqvDt5mzquC0pdjiFxq8vdvb6yzzYa80S4UFzu4KURbQ7Fn9as1PVk4uDnNmxL4PM97GQi/9KnMVPcqr6JvFzJw0RZ6ZcFdzUJDRxYy4LgTEhhAIJdnhMGqEPNRnD3b0Nl7EDn0YMyuKF1dZ3tUIX2tjzDo+R29tzEOZvq6WyU0fdm8+pnP/mk8vZi2PaH0Qo2FiFcq8D+HJ8ZQm1dqiQOgtqyINdtImClO2K71yMQEPK7Pmcggr5u5Re0kIH28UdWZFD8sX4Nt/wOxXie7C7g1d1SThnoTMkQbbkaS5M1eB0af1pIYR3H6S05ca94X//8xevKsiVOrrpihu8sPVZp3SS3/GyQuJ6vy5Lq4VAeWV4vUnURgXRzzG5B0/WANpYYcMkasw0RQcaQ3qCIhqjtyTX0azfBc3ffWlA5ZS4ImCJe8p6RbpyTE="
  on_success: always
  on_failure: never
  on_start: never
  on_cancel: never
  on_error: never
